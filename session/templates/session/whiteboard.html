{% extends "accounts/base.html" %}
{% load static %}
{% block title %}Whiteboard - COLLABoard{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'session/css/whiteboard.css' %}">

<div class="whiteboard-wrapper">
  <h2 class="session-title">{{ session_title }}</h2>

  <div class="whiteboard-container">
    <div class="toolbar" role="toolbar" aria-label="Whiteboard tools">
      <button id="backBtn" class="btn btn-secondary" data-back-url="{% url 'session_list' %}">← Back</button>

      <label for="colorPicker" title="Choose color">
        🖍️ Color:
        <input type="color" id="colorPicker" value="#000000" />
      </label>

      <label for="sizePicker" title="Brush size">
        ✏️ Size:
        <input type="range" id="sizePicker" min="1" max="20" value="3" />
      </label>

      <button id="penBtn" class="btn btn-secondary active" aria-pressed="true">Pen</button>
      <button id="eraserBtn" class="btn btn-secondary" aria-pressed="false">Eraser</button>
      <button id="clearBtn" class="btn btn-danger">Clear</button>

      <!-- Save button posts PNG to server -->
      <button id="saveBtn" class="btn btn-success" data-save-url="{% url 'save_snapshot' session.id %}">Save</button>

      <button id="exportBtn" class="btn btn-primary">Export</button>
    </div>

    <!-- hidden snapshot image (if exists) - drawn onto canvas by JS on load -->
    {% if snapshot_url %}
      <img id="snapshotImg" src="{{ snapshot_url }}" alt="snapshot" style="display:none;" />
    {% endif %}

    <canvas id="whiteboardCanvas" role="application" aria-label="Collaborative whiteboard"></canvas>
  </div>
</div>

<script src="{% static 'session/js/whiteboard.js' %}"></script>
{% endblock %}
