{% extends "accounts/base.html" %}
{% load static %}

{% block title %}Teacher Dashboard - COLLABoard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'accounts/css/dashboard-shared.css' %}">
{% endblock %}

{% block content %}
<div class="main">
  <section class="dashboard-section">
    <h1>Welcome, {{ user.username }}</h1>
    <p class="subtitle">Manage your classes, monitor sessions, and interact with your students.</p>

    <div class="dashboard-grid">
      <div class="card">
        <h3>My Classes</h3>
        <p>
          You have
          <strong>
            {{ active_classes_count }}
            {% if active_classes_count == 1 %}active class{% else %}active classes{% endif %}
          </strong>.
        </p>
        <a href="{% url 'session_list' %}" class="btn">View Classes</a>
      </div>

      <div class="card">
        <div class="card-header">
          <h3 class="card-title">Active Sessions</h3>
        </div>

        {% if open_sessions %}
          <ul class="session-list">
            {% for session in open_sessions %}
              <li class="session-row">
                <div>
                  <strong>
                    {% if session.title %}{{ session.title }}
                    {% elif session.name %}{{ session.name }}
                    {% else %}Untitled Session{% endif %}
                  </strong>
                  <div class="session-meta">Code: {{ session.code|default:"â€”" }}</div>
                </div>

                <div class="session-actions">
                  <a href="{% url 'whiteboard' session.id %}" class="btn">View</a>
                  <a href="{% url 'session_list' %}" class="btn">Manage</a>
                  <a href="{% url 'whiteboard' session.id %}" class="btn btn-primary">Join Whiteboard</a>
                </div>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <div class="empty-state">
            <p>No active sessions right now.</p>
          </div>
        {% endif %}

        <!-- Card-level action: consistent position with other cards -->
        <div class="card-footer" style="margin-top:16px;">
          <a href="{% url 'session_list' %}" class="btn">Manage Sessions</a>
        </div>
      </div>

      <div class="card">
        <h3>Student Performance</h3>
        <p>Analyze progress and participation in real-time.</p>
        <a href="#" class="btn">View Analytics</a>
      </div>
    </div>
  </section>
</div>
{% endblock %}
